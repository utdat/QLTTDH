<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.quanlytrungtamdayhoc.mapper.SubjectMapper">
	<resultMap id="BaseResultMap"
		type="com.quanlytrungtamdayhoc.dbo.Subject">
		<id column="SUB_ID" jdbcType="INTEGER" property="subId" />
		<result column="SUB_NAME" jdbcType="VARCHAR" property="subName" />
		<result column="SUB_STARTDATE" jdbcType="DATE"
			property="subStartdate" />
		<result column="SUB_SCHEDULE" jdbcType="VARCHAR"
			property="subSchedule" />
		<result column="SUB_ROOM" jdbcType="VARCHAR" property="subRoom" />
		<result column="SUB_TUITION" jdbcType="INTEGER"
			property="subTuition" />

		<association property="teacher"
			javaType="com.quanlytrungtamdayhoc.dbo.Teacher">
			<id property="teaId" column="TEA_ID" />
			<result property="teaEmail" column="TEA_EMAIL" />
			<result property="teaName" column="TEA_NAME" />
			<result property="teaPhone" column="TEA_PHONE" />
			<result property="teaAddress" column="TEA_ADDRESS" />
			<result property="teaGender" column="TEA_GENDER" />
			<result property="teaBirthdate" column="TEA_BIRTHDATE" />
			<result property="teaHiredate" column="TEA_HIREDATE" />
			<result property="teaSchool" column="TEA_SCHOOL" />
			<result property="teaAvatar" column="TEA_AVATAR" />
			<result property="teaSalaryrate" column="TEA_SALARYRATE" />
		</association>

	</resultMap>

<!-- 	<select id="listSubjectById" resultMap="BaseResultMap"
		parameterType="map">
		SELECT * FROM SUBJECTS
		NATURAL JOIN TEACHERS WHERE
		TEACHERS.TEA_ID=#{tea_id} ORDER BY SUB_STARTDATE
	</select> -->

	<select id="listSubject" resultMap="BaseResultMap"
		parameterType="map">
		SELECT *
		FROM SUBJECTS 
        JOIN TEACHERS ON (SUBJECTS.TEA_ID = TEACHERS.TEA_ID)
 		WHERE SUB_ID NOT IN (SELECT SUB_ID FROM STUDENT_SCORES WHERE
		STUDENT_SCORES.STU_ID = #{stuId}) ORDER BY SUB_STARTDATE
	</select>

</mapper>